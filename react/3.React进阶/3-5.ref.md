# ref

## 使用场景

希望直接使用dom元素中的某个方法，或者希望直接使用自定义组件中的某个方法

1. ref作用于内置的html组件，得到的是真实的dom对象
2. ref作用于类组件，得到的是类的实例
3. ref不能作用于函数组件



## 具体用法

>  **注意：**ref不再推荐使用字符串赋值，字符串赋值的方式将来可能会被移除

### 赋值对象

通过 React.createRef 函数创建一个对象，或者手动赋值一个{ current: null}

```jsx
//方式1  
constructor(props) {
    super(props);
    this.txt = React.createRef();
}

//方式2
  constructor(props) {
    super(props);
    this.txt = {
      current: null,
    };
}

render(){
	return <div ref={this.txt}></div>
}
```

### 赋值函数

所赋值的函数在被调用时，会接收一个参数，该参数根据ref所附着的位置来决定，可能是真实的dom对象，也可能是组件实例对象

函数的调用时间点：

1. render函数运行的时候会调用该函数
   1. 在componentDidMount生命周期钩子函数中可以获取ref
2. 如果传递给ref的函数引用不同，会分别调用旧的函数以及新的函数
   1. 旧的函数被调用时，传递的参数为null
   2. 新的函数被调用时，传递的参数为对象（根据ref所附着的位置来决定，可能是真实的dom对象，也可能是组件实例对象）
3. 如果ref所在的组件被卸载，会调用函数

**谨慎使用ref**

能够使用属性和状态进行控制，就不要使用ref。

1. 调用真实的DOM对象中的方法
2. 某个时候需要调用类组件的方法

