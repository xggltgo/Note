# 入口和出口

![](assets/2020-01-09-15-51-07.png)

## 入口

> 入口通过entry进行配置，**入口真正配置的是chunk**

**等效代码**

```js
module.exports = {
	entry:'./src/index.js'
}

// 上述代码会被转换为
module.exports = {
	entry:{
		main:'./src/index.js' // shu'x'm
  }
}
```

****

**配置多个chunk**

```js
module.exports = {
	entry:{
		main:'./src/index.js',
    a:'./src/a.js'
  }
}
```

**一个chunk对应多个入口模块**

```js
module.exports = {
	entry:{
		main:'./src/index.js',
    a:['./src/a.js','./src/index.js']
  }
}
```

## 出口

> 出口通过 output 进行配置，**这里的出口是针对资源列表的文件名或路径的配置**

output 的 filename 配置：

1. 可配置为静态字符串 例如：‘boudle.js’ | ‘scripts/boudle.js’
1. 配置规则 例如：‘[id].[chunkhash:5].js’

- name：chunkname
- hash: 总的资源hash，通常用于解决缓存问题
- chunkhash: 使用chunkhash
- id: 使用chunkid，不推荐（由于chunkid在开发环境和生成环境下不一致，所以不推荐）

```js
var path = require("path")

module.exports = {
    mode: "production",
    entry: {
        main: "./src/index.js", //属性名：chunk的名称， 属性值：入口模块（启动模块）
        a: ["./src/a.js", "./src/index.js"] //启动模块有两个
    },
    output: {
        path: path.resolve(__dirname, "target"), //必须配置一个绝对路径，表示资源放置的文件夹，默认是dist
        filename: "[id].[chunkhash:5].js" //配置的合并的js文件的规则 
    },
    devtool: "source-map"
}
```

## 思考

> 资源 hash 的作用？
>
> 资源 hash 通常用于解决缓存问题，比如，我们通过webpack打包后的css文件、js文件，它们通常会被一个html页面通过link标签或者script标签引入，这类静态资源浏览器请求后通常会将其缓存起来（需要服务器配合）。如果我们在文件名中不使用hash，将来css、js变化后，由于我们的文件名没有变化，浏览器依然读取的是缓存。





